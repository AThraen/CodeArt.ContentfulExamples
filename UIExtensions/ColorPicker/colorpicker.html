<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css">
  <script src="https://unpkg.com/contentful-ui-extensions-sdk@3"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.0.4/jscolor.min.js"></script>

</head>
<body>
  <div class="cf-form-field">
    <input type="text" class="cf-form-input jscolor" id="color">
    <div class="cf-form-hint">Pick the background color </div>
  </div>
	<script>
	window.contentfulExtension.init(function(api) {
    //api.window.startAutoResizer();
    api.window.updateHeight(200);
  	console.log(api.field.getValue());
    
    var inputfield=document.getElementById('color');
    inputfield.addEventListener('change',function() {
    	api.field.setValue(inputfield.value);
    });
    
    api.field.onValueChanged(function(value) {
    	if (value !== inputfield.value) {
      	inputfield.value=value;
				inputfield.style.backgroundColor = '#' + inputfield.value;
    	}
  	});
    
    if(api.field.getValue()!=null){
  		inputfield.value=api.field.getValue();
      inputfield.style.backgroundColor = '#' + inputfield.value;
    }
    
	});
	</script>
  </body>
</html>
